(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{3236:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return n(1600)}])},192:function(e,t,n){"use strict";n.d(t,{consultas:function(){return s}});let o="http://45.173.228.31/api",s={getUser:"".concat(o,"/get-user"),insertUser:"".concat(o,"/insert-user")}},1600:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return LoginPage}});var o=n(5893),s=n(1163),a=n(7294),r=n(192);n(8256);let{getUser:l}=r.consultas;function LoginPage(){let e=(0,s.useRouter)(),[t,n]=(0,a.useState)(null);async function handleSubmit(t){t.preventDefault();let o=new FormData(t.currentTarget),s=o.get("email"),a=o.get("password");try{let t=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,password:a})});if(t.ok){let n=await t.json();localStorage.setItem("isLoggedIn","true"),localStorage.setItem("Username",n.usernaame),localStorage.setItem("Rol",n.rol),console.log("Se inicio sesion correctamente"),console.log("Rol de sesion",n.rol),"Administrador"==n.rol?e.push("/users"):"T\xe9cnico"==n.rol&&e.push("/returns/new-return")}else n("Credenciales inv\xe1lidas. Por favor, int\xe9ntalo de nuevo.")}catch(e){n("Se produjo un error. Por favor, int\xe9ntalo de nuevo.")}}return(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,o.jsxs)("form",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",onSubmit:handleSubmit,children:[(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:"Usuario"}),(0,o.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"email",type:"text",name:"email",placeholder:"Usuario",required:!0})]}),(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password",children:"Contrase\xf1a"}),(0,o.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"password",type:"password",name:"password",placeholder:"Contrase\xf1a",required:!0})]}),t&&(0,o.jsx)("p",{className:"text-red-500 text-xs italic mb-4",children:t}),(0,o.jsx)("div",{className:"flex items-center justify-between",children:(0,o.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",children:"Ingresar"})})]})})}},8256:function(){},1163:function(e,t,n){e.exports=n(2338)}},function(e){e.O(0,[774,449,888,179],function(){return e(e.s=3236)}),_N_E=e.O()}]);