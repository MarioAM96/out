(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[240],{7138:function(e,r,s){Promise.resolve().then(s.bind(s,8309))},8309:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return Page}});var t=s(7437),a=s(2265),l=s(1865),n=s(8110),i=s(4578),o=s(459),d=s(1908),c=s(3023),m=s(8094);let u=i.Ry({userName:i.Z_(),accountType:i.Km(["T\xe9cnico","Administrador"]),password:i.Z_().min(3),passwordConfirm:i.Z_()}).refine(e=>e.password===e.passwordConfirm,{message:"Las contrase\xf1as no coinciden",path:["passwordConfirm"]});var user_form=e=>{let{onSubmit:r}=e,s=(0,l.cI)({resolver:(0,n.F)(u),defaultValues:{userName:"",password:"",passwordConfirm:""}});return s.watch("accountType"),(0,t.jsx)("div",{className:"max-w-md w-full",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Nuevo Usuario"}),(0,t.jsx)(o.l0,{...s,children:(0,t.jsxs)("form",{onSubmit:s.handleSubmit(e=>{r(e)}),className:"flex flex-col gap-4",children:[(0,t.jsx)(o.Wi,{control:s.control,name:"userName",render:e=>{let{field:r}=e;return(0,t.jsxs)(o.xJ,{children:[(0,t.jsx)(o.lX,{children:"Nombre de usuario"}),(0,t.jsx)(o.NI,{children:(0,t.jsx)(d.I,{placeholder:"Nombre de usuario",type:"text",...r})}),(0,t.jsx)(o.zG,{})]})}}),(0,t.jsx)(o.Wi,{control:s.control,name:"accountType",render:e=>{let{field:r}=e;return(0,t.jsxs)(o.xJ,{children:[(0,t.jsx)(o.lX,{children:"Rol"}),(0,t.jsxs)(m.Ph,{onValueChange:r.onChange,children:[(0,t.jsx)(o.NI,{children:(0,t.jsx)(m.i4,{children:(0,t.jsx)(m.ki,{placeholder:"Seleccionar un Rol"})})}),(0,t.jsxs)(m.Bw,{children:[(0,t.jsx)(m.Ql,{value:"T\xe9cnico",children:"T\xe9cnico"}),(0,t.jsx)(m.Ql,{value:"Administrador",children:"Administrador"})]})]}),(0,t.jsx)(o.zG,{})]})}}),(0,t.jsx)(o.Wi,{control:s.control,name:"password",render:e=>{let{field:r}=e;return(0,t.jsxs)(o.xJ,{children:[(0,t.jsx)(o.lX,{children:"Contrase\xf1a"}),(0,t.jsx)(o.NI,{children:(0,t.jsx)(d.I,{placeholder:"Contrase\xf1a",type:"password",...r})}),(0,t.jsx)(o.zG,{})]})}}),(0,t.jsx)(o.Wi,{control:s.control,name:"passwordConfirm",render:e=>{let{field:r}=e;return(0,t.jsxs)(o.xJ,{children:[(0,t.jsx)(o.lX,{children:"Confirmar Contrase\xf1a"}),(0,t.jsx)(o.NI,{children:(0,t.jsx)(d.I,{placeholder:"Confirmar Contrase\xf1a",type:"password",...r})}),(0,t.jsx)(o.zG,{})]})}}),(0,t.jsx)(c.z,{type:"submit",className:"w-full",children:"Crear"})]})})]})})},x=s(3216),h=s(7660),j=s(2553),f=s(6434);function DataTable(e){var r;let{columns:s,data:l}=e,[n,i]=(0,a.useState)([]),[o,m]=(0,a.useState)([]),[u,g]=(0,a.useState)({}),[p,w]=(0,a.useState)(""),N=(0,x.b7)({data:l,columns:s,state:{sorting:n,columnFilters:o,columnVisibility:u},onSortingChange:i,onColumnFiltersChange:m,onColumnVisibilityChange:g,getCoreRowModel:(0,h.sC)(),getSortedRowModel:(0,h.tj)(),getFilteredRowModel:(0,h.vL)(),getPaginationRowModel:(0,h.G_)()}),normalizeText=e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),filterData=e=>{let r=normalizeText(e);N.setGlobalFilter(r),w(e)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center py-4",children:(0,t.jsx)(d.I,{placeholder:"Buscar por Nombre o Rol...",value:p,onChange:e=>filterData(e.target.value),className:"max-w-sm"})}),(0,t.jsxs)(f.h_,{children:[(0,t.jsx)(f.$F,{asChild:!0,children:(0,t.jsx)(c.z,{variant:"outline",className:"ml-auto",children:"Columnas"})}),(0,t.jsx)(f.AW,{align:"end",children:N.getAllColumns().filter(e=>e.getCanHide()).map(e=>(0,t.jsx)(f.bO,{className:"capitalize",checked:e.getIsVisible(),onCheckedChange:r=>e.toggleVisibility(!!r),children:e.id},e.id))})]})]}),(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)(j.iA,{children:[(0,t.jsx)(j.xD,{children:N.getHeaderGroups().map(e=>(0,t.jsx)(j.SC,{children:e.headers.map(e=>(0,t.jsx)(j.ss,{children:e.isPlaceholder?null:(0,x.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,t.jsx)(j.RM,{children:(null===(r=N.getRowModel().rows)||void 0===r?void 0:r.length)?N.getRowModel().rows.map(e=>(0,t.jsx)(j.SC,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,t.jsx)(j.pj,{children:(0,x.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,t.jsx)(j.SC,{children:(0,t.jsx)(j.pj,{colSpan:s.length,className:"h-24 text-center",children:"No results."})})})]})}),(0,t.jsxs)("div",{className:"flex items-center justify-end space-x-2 py-4",children:[(0,t.jsx)(c.z,{variant:"outline",size:"sm",onClick:()=>N.previousPage(),disabled:!N.getCanPreviousPage(),children:"Anterior"}),(0,t.jsx)(c.z,{variant:"outline",size:"sm",onClick:()=>N.nextPage(),disabled:!N.getCanNextPage(),children:"Siguiente"})]})]})}var g=s(4196),p=s(7472);let w=[{accessorKey:"Nombre",header:e=>{let{column:r}=e;return(0,t.jsxs)(c.z,{variant:"ghost",onClick:()=>r.toggleSorting("asc"===r.getIsSorted()),children:["Nombre",(0,t.jsx)(g.Z,{className:"ml-2 h-4 w-4"})]})}},{accessorKey:"Rol",header:e=>{let{column:r}=e;return(0,t.jsxs)(c.z,{variant:"ghost",onClick:()=>r.toggleSorting("asc"===r.getIsSorted()),children:["Rol",(0,t.jsx)(g.Z,{className:"ml-2 h-4 w-4"})]})}},{accessorKey:"Password",header:e=>{let{column:r}=e;return(0,t.jsxs)(c.z,{variant:"ghost",onClick:()=>r.toggleSorting("asc"===r.getIsSorted()),children:["Password",(0,t.jsx)(g.Z,{className:"ml-2 h-4 w-4"})]})}},{id:"actions",cell:e=>{let{row:r}=e,s=r.original;return(0,t.jsxs)(f.h_,{children:[(0,t.jsx)(f.$F,{asChild:!0,children:(0,t.jsxs)(c.z,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,t.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,t.jsx)(p.Z,{className:"h-4 w-4"})]})}),(0,t.jsxs)(f.AW,{align:"end",children:[(0,t.jsx)(f.Ju,{children:"Acciones"}),(0,t.jsx)(f.Xi,{onClick:()=>navigator.clipboard.writeText(s.id),children:"Copiar ID"}),(0,t.jsx)(f.VD,{}),(0,t.jsx)(f.Xi,{children:"Editar"}),(0,t.jsx)(f.Xi,{children:"View payment details"})]})]})}}];var N=s(2173),C=s(8578);async function fetchData(){try{let e=await N.Z.get("http://45.173.228.31/api/get-data/1UliJqH6oNuZEk6l72r7alxHe5QOyYGS6ZzS8NtyfYP4/EQUIPO");return e.data}catch(e){throw console.error("Error fetching data:",e),e}}function Page(){let[e,r]=(0,a.useState)(null),[s,l]=(0,a.useState)([]),[n,i]=(0,a.useState)(!1),[o,d]=(0,a.useState)(""),{toast:m}=(0,C.pm)();(0,a.useEffect)(()=>{let e=localStorage.getItem("isLoggedIn");i("true"===e);let r=localStorage.getItem("Rol");r&&d(r),fetchData().then(e=>l(e)),e||(window.location.href="/login")},[]);let handleSubmit=async e=>{try{let s={userName:e.userName,accountType:e.accountType,password:e.password},t=await N.Z.post("http://45.173.228.31/api/insert-user",s);m({title:"\xc9xito!",description:"Usuario creado exitosamente."}),console.log("POST Response:",t.data),fetchData().then(e=>l(e)),r(e),i(!0)}catch(e){throw m({title:"Error!",description:"\xa1Ups! Algo sali\xf3 mal."}),console.error("Error submitting form:",e),e}};return(0,t.jsxs)("section",{className:"bg-gray-100 py-10",children:[(0,t.jsx)("div",{className:"container mx-auto",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-2",children:[(0,t.jsx)("div",{className:"flex h-full items-center justify-center rounded bg-white p-6 shadow-md",children:n&&"Administrador"===o?(0,t.jsx)(user_form,{onSubmit:handleSubmit}):(0,t.jsx)("p",{className:"text-red-500",children:"No tiene permisos necesarios para ver esta pantalla."})}),(0,t.jsx)("div",{className:"rounded bg-white p-6 shadow-md",children:n&&"Administrador"===o&&(0,t.jsx)(DataTable,{columns:w,data:s})})]})}),n&&(0,t.jsx)("div",{className:"fixed right-0 top-0 m-8",children:(0,t.jsx)(c.z,{onClick:()=>{localStorage.removeItem("isLoggedIn"),i(!1),window.location.href="/login"},variant:"destructive",children:"Cerrar sesi\xf3n"})})]})}},459:function(e,r,s){"use strict";s.d(r,{l0:function(){return u},NI:function(){return g},Wi:function(){return FormField},xJ:function(){return j},lX:function(){return f},zG:function(){return w}});var t=s(7437),a=s(2265),l=s(7256),n=s(1865),i=s(9311),o=s(6743),d=s(9213);let c=(0,d.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),m=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(o.f,{ref:r,className:(0,i.cn)(c(),s),...a})});m.displayName=o.f.displayName;let u=n.RV,x=a.createContext({}),FormField=e=>{let{...r}=e;return(0,t.jsx)(x.Provider,{value:{name:r.name},children:(0,t.jsx)(n.Qr,{...r})})},useFormField=()=>{let e=a.useContext(x),r=a.useContext(h),{getFieldState:s,formState:t}=(0,n.Gc)(),l=s(e.name,t);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=r;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...l}},h=a.createContext({}),j=a.forwardRef((e,r)=>{let{className:s,...l}=e,n=a.useId();return(0,t.jsx)(h.Provider,{value:{id:n},children:(0,t.jsx)("div",{ref:r,className:(0,i.cn)("space-y-2",s),...l})})});j.displayName="FormItem";let f=a.forwardRef((e,r)=>{let{className:s,...a}=e,{error:l,formItemId:n}=useFormField();return(0,t.jsx)(m,{ref:r,className:(0,i.cn)(l&&"text-destructive",s),htmlFor:n,...a})});f.displayName="FormLabel";let g=a.forwardRef((e,r)=>{let{...s}=e,{error:a,formItemId:n,formDescriptionId:i,formMessageId:o}=useFormField();return(0,t.jsx)(l.g7,{ref:r,id:n,"aria-describedby":a?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!a,...s})});g.displayName="FormControl";let p=a.forwardRef((e,r)=>{let{className:s,...a}=e,{formDescriptionId:l}=useFormField();return(0,t.jsx)("p",{ref:r,id:l,className:(0,i.cn)("text-[0.8rem] text-muted-foreground",s),...a})});p.displayName="FormDescription";let w=a.forwardRef((e,r)=>{let{className:s,children:a,...l}=e,{error:n,formMessageId:o}=useFormField(),d=n?String(null==n?void 0:n.message):a;return d?(0,t.jsx)("p",{ref:r,id:o,className:(0,i.cn)("text-[0.8rem] font-medium text-destructive",s),...l,children:d}):null});w.displayName="FormMessage"}},function(e){e.O(0,[310,140,293,474,57,233,204,971,864,744],function(){return e(e.s=7138)}),_N_E=e.O()}]);