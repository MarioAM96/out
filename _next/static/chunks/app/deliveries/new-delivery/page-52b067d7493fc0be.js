(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[358],{2784:function(e,a,s){Promise.resolve().then(s.bind(s,7189))},7189:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return Page}});var t=s(7437),l=s(2265),n=s(2173),i=s(3216),r=s(7660),d=s(2553),o=s(6434),c=s(3023),g=s(1908),h=s(8094),m=s(8578);function DataTable(e){var a,s,x;let{columns:u,data:j}=e,[v,f]=(0,l.useState)(null),[C,b]=(0,l.useState)([]),[N,S]=(0,l.useState)([]),[p,y]=(0,l.useState)({}),[w,k]=(0,l.useState)([]),[E,I]=(0,l.useState)("");(0,l.useEffect)(()=>{!async function(){try{let e=await n.Z.get("http://45.173.228.31/api/get-warehousedata/1UliJqH6oNuZEk6l72r7alxHe5QOyYGS6ZzS8NtyfYP4/MATERIAL_STOCK");k(e.data)}catch(e){console.error("Error al obtener los datos de bodega:",e)}}()},[]);let z=(0,i.b7)({data:j,columns:u,state:{sorting:C,columnFilters:N,columnVisibility:p},onSortingChange:b,onColumnFiltersChange:S,onColumnVisibilityChange:y,getCoreRowModel:(0,r.sC)(),getSortedRowModel:(0,r.tj)(),getFilteredRowModel:(0,r.vL)(),getPaginationRowModel:(0,r.G_)()});function handleInputChange(e,a){if(v){let s={...v,original:{...v.original,[a]:e}};f(s)}}async function handleSave(){if(v){let e=v.original;e["Status Entrega"]="Entregado";try{let a=await n.Z.put("http://45.173.228.31/api/update-data/1UliJqH6oNuZEk6l72r7alxHe5QOyYGS6ZzS8NtyfYP4/PEDIDOS",e);(0,m.Am)({title:"\xc9xito!",description:"Entrega gestionada Exitosamente."}),window.location.reload(),console.log("Respuesta del servidor:",a.data)}catch(e){console.error("Error al guardar los datos:",e)}f(null)}}return(0,t.jsx)("section",{className:"py-0 bg-gray-100",children:(0,t.jsx)("div",{className:"container mx-auto",children:(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"md:col-span-1",children:(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"flex items-center justify-center p-6 rounded bg-white shadow-lg border border-gray-200",children:[!v&&(0,t.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Gesti\xf3n de entregas"}),v&&(0,t.jsxs)("div",{className:"edit-form",children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Gesti\xf3n de entregas"}),(0,t.jsx)("label",{htmlFor:"bodega",className:"block text-sm font-medium text-gray-700",children:"Bodega:"}),(0,t.jsxs)(h.Ph,{value:v.original.Bodega||"",onValueChange:e=>{handleInputChange(e,"Bodega"),console.log("Valor seleccionado:",e)},children:[(0,t.jsx)(h.i4,{children:(0,t.jsx)(h.ki,{children:v.original.Bodega})}),(0,t.jsx)(h.Bw,{children:w.map((e,a)=>(0,t.jsx)(h.Ql,{value:e,children:e},a))})]})]}),(0,t.jsxs)("div",{className:"inline-flex flex-col",children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"cantidad",className:"block text-sm font-medium text-gray-700",children:"C\xf3digo:"}),(0,t.jsx)(g.I,{type:"text",id:"cantidad",value:v.original.Código,onChange:e=>handleInputChange(e.target.value,"C\xf3digo"),className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"cantidadEntregada",className:"block text-sm font-medium text-gray-700",children:"Fecha de entrega:"}),(0,t.jsx)(g.I,{type:"date",id:"cantidadEntregada",value:v.original["Fecha de entrega"],onChange:e=>handleInputChange(e.target.value,"Fecha de entrega"),className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"cantidadEntregada",className:"block text-sm font-medium text-gray-700",children:"Cantidad Entregada:"}),(0,t.jsx)(g.I,{type:"number",id:"cantidadEntregada",value:v.original["Cantidad Entregada"],onChange:e=>handleInputChange(e.target.value,"Cantidad Entregada"),className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"observacion",className:"block text-sm font-medium text-gray-700",children:"Observaci\xf3n:"}),(0,t.jsx)(g.I,{type:"text",id:"observacion",value:v.original.Observación,onChange:e=>handleInputChange(e.target.value,"Observaci\xf3n"),className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]})]}),(0,t.jsxs)("div",{className:"flex justify-end",children:[(0,t.jsx)(c.z,{onClick:handleSave,className:"mr-2",children:"Guardar"}),(0,t.jsx)(c.z,{onClick:function(){f(null)},children:"Cancelar"})]})]})]})})}),(0,t.jsx)("div",{className:"md:col-span-3",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded shadow-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center py-4",children:(0,t.jsx)(g.I,{placeholder:"Buscar...",value:null!==(x=null===(a=z.getColumn("Material Solicitado"))||void 0===a?void 0:a.getFilterValue())&&void 0!==x?x:"",onChange:e=>{var a;return null===(a=z.getColumn("Material Solicitado"))||void 0===a?void 0:a.setFilterValue(e.target.value)},className:"max-w-sm"})}),(0,t.jsxs)(o.h_,{children:[(0,t.jsx)(o.$F,{asChild:!0,children:(0,t.jsx)(c.z,{variant:"outline",className:"ml-auto",children:"Columnas"})}),(0,t.jsx)(o.AW,{align:"end",children:z.getAllColumns().filter(e=>e.getCanHide()).map(e=>(0,t.jsx)(o.bO,{className:"capitalize",checked:e.getIsVisible(),onCheckedChange:a=>e.toggleVisibility(!!a),children:e.id},e.id))})]})]}),(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)(d.iA,{children:[(0,t.jsx)(d.xD,{children:z.getHeaderGroups().map(e=>(0,t.jsxs)(d.SC,{children:[(0,t.jsx)(d.ss,{}),e.headers.map(e=>(0,t.jsx)(d.ss,{children:e.isPlaceholder?null:(0,i.ie)(e.column.columnDef.header,e.getContext())},e.id))]},e.id))}),(0,t.jsx)(d.RM,{children:(null===(s=z.getRowModel().rows)||void 0===s?void 0:s.length)?z.getRowModel().rows.map(e=>(0,t.jsxs)(d.SC,{"data-state":e.getIsSelected()&&"selected",children:[(0,t.jsx)(d.pj,{children:(0,t.jsx)(c.z,{variant:"outline",onClick:()=>{console.log("Editando el registro:",e.original),f(e)},children:"Gestionar"})}),e.getVisibleCells().map(e=>(0,t.jsx)(d.pj,{children:(0,i.ie)(e.column.columnDef.cell,e.getContext())},e.id))]},e.id)):(0,t.jsx)(d.SC,{children:(0,t.jsx)(d.pj,{colSpan:u.length+1,className:"h-24 text-center",children:"Sin resultados.."})})})]})}),(0,t.jsxs)("div",{className:"flex items-center justify-end space-x-2 py-4",children:[(0,t.jsx)(c.z,{variant:"outline",size:"sm",onClick:()=>z.previousPage(),disabled:!z.getCanPreviousPage(),children:"Anterior"}),(0,t.jsx)(c.z,{variant:"outline",size:"sm",onClick:()=>z.nextPage(),disabled:!z.getCanNextPage(),children:"Siguiente"})]})]})})]})})})})}var x=s(4196),u=s(7472);let j=[{accessorKey:"udf",header:e=>{let{column:a}=e;return(0,t.jsxs)(c.z,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),children:[".",(0,t.jsx)(x.Z,{className:"ml-2 h-4 w-4"})]})}},{accessorKey:"Material Solicitado",header:e=>{let{column:a}=e;return(0,t.jsxs)(c.z,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),children:["Material Solicitado",(0,t.jsx)(x.Z,{className:"ml-2 h-4 w-4"})]})}},{accessorKey:"Cantidad",header:e=>{let{column:a}=e;return(0,t.jsxs)(c.z,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),children:["Cantidad",(0,t.jsx)(x.Z,{className:"ml-2 h-4 w-4"})]})}},{accessorKey:"Observaci\xf3n",header:e=>{let{column:a}=e;return(0,t.jsxs)(c.z,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),children:["Observaci\xf3n",(0,t.jsx)(x.Z,{className:"ml-2 h-4 w-4"})]})}},{accessorKey:"Fecha solicitada",header:e=>{let{column:a}=e;return(0,t.jsxs)(c.z,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),children:["Fecha solicitada",(0,t.jsx)(x.Z,{className:"ml-2 h-4 w-4"})]})}},{accessorKey:"Paquete de Trabajo",header:e=>{let{column:a}=e;return(0,t.jsxs)(c.z,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),children:["Paquete de Trabajo",(0,t.jsx)(x.Z,{className:"ml-2 h-4 w-4"})]})}},{accessorKey:"T\xe9cnico Responsable",header:e=>{let{column:a}=e;return(0,t.jsxs)(c.z,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),children:["T\xe9cnico Responsable",(0,t.jsx)(x.Z,{className:"ml-2 h-4 w-4"})]})}},{accessorKey:"Status Entrega",header:e=>{let{column:a}=e;return(0,t.jsxs)(c.z,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),children:["Status Entrega",(0,t.jsx)(x.Z,{className:"ml-2 h-4 w-4"})]})}},{accessorKey:"Bodega",header:e=>{let{column:a}=e;return(0,t.jsxs)(c.z,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),children:["Bodega",(0,t.jsx)(x.Z,{className:"ml-2 h-4 w-4"})]})}},{accessorKey:"C\xf3digo",header:e=>{let{column:a}=e;return(0,t.jsxs)(c.z,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),children:["C\xf3digo",(0,t.jsx)(x.Z,{className:"ml-2 h-4 w-4"})]})}},{accessorKey:"Fecha de entrega",header:e=>{let{column:a}=e;return(0,t.jsxs)(c.z,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),children:["Fecha de entrega",(0,t.jsx)(x.Z,{className:"ml-2 h-4 w-4"})]})}},{accessorKey:"Cantidad Entregada",header:e=>{let{column:a}=e;return(0,t.jsxs)(c.z,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),children:["Cantidad Entregada",(0,t.jsx)(x.Z,{className:"ml-2 h-4 w-4"})]})}},{id:"actions",cell:e=>{let{row:a}=e,s=a.original;return(0,t.jsxs)(o.h_,{children:[(0,t.jsx)(o.$F,{asChild:!0,children:(0,t.jsxs)(c.z,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,t.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,t.jsx)(u.Z,{className:"h-4 w-4"})]})}),(0,t.jsxs)(o.AW,{align:"end",children:[(0,t.jsx)(o.Ju,{children:"Actions"}),(0,t.jsx)(o.Xi,{onClick:()=>navigator.clipboard.writeText(s.id),children:"Copiar ID"}),(0,t.jsx)(o.VD,{}),(0,t.jsx)(o.Xi,{children:"View customer"}),(0,t.jsx)(o.Xi,{children:"View payment details"})]})]})}}];async function fetchData(){try{let e=await n.Z.get("http://45.173.228.31/api/get-orders/1UliJqH6oNuZEk6l72r7alxHe5QOyYGS6ZzS8NtyfYP4/PEDIDOS");return e.data}catch(e){throw console.error("Error fetching data:",e),e}}function Page(){let[e,a]=l.useState(null),[s,n]=l.useState([]),{toast:i}=(0,m.pm)();return l.useEffect(()=>{fetchData().then(e=>n(e))},[]),(0,t.jsx)("section",{className:"py-24",children:(0,t.jsx)("div",{className:"container",children:(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-8",children:(0,t.jsx)("div",{children:(0,t.jsx)(DataTable,{columns:j,data:s})})})})})}}},function(e){e.O(0,[310,140,293,474,57,204,971,864,744],function(){return e(e.s=2784)}),_N_E=e.O()}]);